<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="fin-eug-1" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_periods</comment>
        <createTable tableName="fin_periods" schemaName="apps" remarks="Список финансовых периодов">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="code" type="varchar(20)" remarks="Код периода">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование периода">
                <constraints nullable="true"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала периода">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания периода">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar(1)" remarks="Статус периода" defaultValue="U">
                <constraints nullable="false"/>
            </column>

            <column name="closed_period_date" type="TIMESTAMP" remarks="Дата закрытия периода">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-2" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_periods</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_periods"
                schemaName="apps"
                tableName="fin_periods"/>
    </changeSet>

    <changeSet id="fin-eug-3" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_periods</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_periods_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-4" logicalFilePath="path-independent" author="eugene">
        <comment>Creating unique key for table: fin_periods</comment>
        <addUniqueConstraint
                columnNames="code"
                constraintName="un_fin_periods_1"
                schemaName="apps"
                tableName="fin_periods"/>
    </changeSet>

    <changeSet id="fin-eug-5" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_sale_invoices</comment>
        <createTable tableName="fin_sale_invoices" schemaName="apps" remarks="Список исходящих счетов-фактур">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="src_invoice_id" type="number" remarks="Идентификатор исходной СФ">
                <constraints nullable="true"/>
            </column>

            <column name="doc_type_code" type="varchar(20)" remarks="Код типа документа">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_type_code" type="varchar(20)" remarks="Код типа счёт-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="vendor_id" type="number" remarks="Идентификатор поставщика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="consignor_id" type="number" remarks="Идентификатор грузоотправителя">
                <constraints nullable="false"/>
            </column>

            <column name="customer_id" type="number" remarks="Идентификатор заказчика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="consignee_id" type="number" remarks="Идентификатор получателя">
                <constraints nullable="false"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="false"/>
            </column>

            <column name="vendor_bank_account_id" type="number" remarks="Идентификатор банковского счёта поставщика">
                <constraints nullable="true"/>
            </column>

            <column name="customer_bank_account_id" type="number" remarks="Идентификатор банковского счёта заказчика">
                <constraints nullable="true"/>
            </column>

            <column name="doc_num" type="varchar(20)" remarks="№ счёт-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_date" type="date" remarks="Дата счёт-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="turnover_date" type="date" remarks="Дата совершения оборота по реализации">
                <constraints nullable="false"/>
            </column>

            <column name="accounting_date_date" type="date" remarks="Дата проводки">
                <constraints nullable="false"/>
            </column>

            <column name="due_date" type="date" remarks="Дата оплаты согласно договора">
                <constraints nullable="true"/>
            </column>

            <column name="erp_doc_num" type="varchar(30)" remarks="№ счёт-фактуры в системе ERP">
                <constraints nullable="true"/>
            </column>

            <column name="erp_doc_date" type="date" remarks="Дата регистрации счёт-фактуры в системе ERP">
                <constraints nullable="true"/>
            </column>

            <column name="esf_doc_num" type="varchar(30)" remarks="№ счёт-фактуры в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="esf_doc_date" type="date" remarks="Дата регистрации счёт-фактуры в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="description" type="varchar(300)" remarks="Описание счёт-фактуры (заголовок)">
                <constraints nullable="true"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Курс">
                <constraints nullable="true"/>
            </column>

            <column name="exchange_date" type="date" remarks="Дата курса">
                <constraints nullable="true"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счет-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="tax" type="number" remarks="Сумма НДС">
                <constraints nullable="false"/>
            </column>

            <column name="total_delivery_header_id" type="number" remarks="Идентифактор из таблицы объёмов оказанных услуг - заголовок">
                <constraints nullable="true"/>
            </column>

            <column name="transfer_to_erp_date" type="TIMESTAMP" remarks="Дата передачи в систему ERP">
                <constraints nullable="true"/>
            </column>

            <column name="is_need_transfer_to_erp" type="number" remarks="Требуется передача в ЕРП">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(20)" remarks="Статус СФ в БИС">
                <constraints nullable="true"/>
            </column>

            <column name="is_ready" type="number" remarks="готов">
                <constraints nullable="true"/>
            </column>

            <column name="esf_status" type="varchar2(10)" remarks="Статус СФ в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-6" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_sale_invoices</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_sale_invoices"
                schemaName="apps"
                tableName="fin_sale_invoices"/>
    </changeSet>

    <changeSet id="fin-eug-7" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_sale_invoices</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_sale_invoices_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-8" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_types</comment>
        <createTable tableName="fin_invoice_types" schemaName="apps" remarks="Типы счетов-фактур">

            <column name="code" type="varchar(20)" remarks="Код типа СФ">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование типа СФ">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-9" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_fin_invoice_types"
                schemaName="apps"
                tableName="fin_invoice_types"/>
    </changeSet>

    <changeSet id="fin-eug-10" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_tax_rates</comment>
        <createTable tableName="fin_tax_rates" schemaName="apps" remarks="Ставки НДС">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="code" type="varchar(20)" remarks="Код НДС">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Описание НДС">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала действия">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания действия">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate" type="number" remarks="Ставка НДС">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-11" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_tax_rates</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_tax_rates"
                schemaName="apps"
                tableName="fin_tax_rates"/>
    </changeSet>

    <changeSet id="fin-eug-12" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_tax_rates</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_tax_rates_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-13" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_sale_invoice_lines</comment>
        <createTable tableName="fin_sale_invoice_lines" schemaName="apps" remarks="Строки выставленных счетов-фактур">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_id" type="number" remarks="Идентификатор выставленной СФ">
                <constraints nullable="false"/>
            </column>

            <column name="line_type_code" type="varchar(20)" remarks="Код типа строки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_num" type="number" remarks="Номер позиции">
                <constraints nullable="false"/>
            </column>

            <column name="gjs_id" type="number" remarks="Идентификатор услуги">
                <constraints nullable="true"/>
            </column>

            <column name="item_num" type="varchar(100)" remarks="Номер услуги">
                <constraints nullable="true"/>
            </column>

            <column name="description" type="varchar(100)" remarks="Описание">
                <constraints nullable="true"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="true"/>
            </column>

            <column name="unit_name" type="varchar(100)" remarks="Ед. измерения">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate_id" type="number" remarks="Идентификатор ставки НДС">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate" type="number" remarks="Ставка НДС">
                <constraints nullable="true"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="unit_price" type="number" remarks="Цена за единицу">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Стоимость ТРУ">
                <constraints nullable="false"/>
            </column>

            <column name="discount" type="number" remarks="Сумма скидки">
                <constraints nullable="true"/>
            </column>

            <column name="total_delivery_line_id" type="number" remarks="Идентифактор из таблицы объёмов оказанных услуг - строка">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-14" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_sale_invoice_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_sale_invoice_lines"
                schemaName="apps"
                tableName="fin_sale_invoice_lines"/>
    </changeSet>

    <changeSet id="fin-eug-15" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_sale_invoice_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_sale_invoice_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-16" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_doc_types</comment>
        <createTable tableName="fin_doc_types" schemaName="apps" remarks="Виды финансовых документов">

            <column name="code" type="varchar(20)" remarks="Код вида документа">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование вида документа">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-17" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_doc_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_fin_doc_types"
                schemaName="apps"
                tableName="fin_doc_types"/>
    </changeSet>

    <changeSet id="fin-eug-18" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_line_types</comment>
        <createTable tableName="fin_invoice_line_types" schemaName="apps" remarks="Типы строк СФ">

            <column name="code" type="varchar(20)" remarks="Код типа строки">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование типа строки">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-19" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_line_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_fin_invoice_line_types"
                schemaName="apps"
                tableName="fin_invoice_line_types"/>
    </changeSet>

    <changeSet id="fin-eug-20" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_purchase_invoices</comment>
        <createTable tableName="fin_purchase_invoices" schemaName="apps" remarks="Список входящих счетов-фактур">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="src_invoice_id" type="number" remarks="Идентификатор исходной СФ">
                <constraints nullable="true"/>
            </column>

            <column name="vendor_id" type="number" remarks="Идентификатор поставщика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="consignor_id" type="number" remarks="Идентификатор грузоотправителя">
                <constraints nullable="false"/>
            </column>

            <column name="customer_id" type="number" remarks="Идентификатор заказчика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="consignee_id" type="number" remarks="Идентификатор получателя">
                <constraints nullable="false"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="false"/>
            </column>

            <column name="vendor_bank_account_id" type="number" remarks="Идентификатор банковского счёта поставщика">
                <constraints nullable="true"/>
            </column>

            <column name="customer_bank_account_id" type="number" remarks="Идентификатор банковского счёта заказчика">
                <constraints nullable="true"/>
            </column>

            <column name="doc_num" type="varchar(20)" remarks="№ счёт-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_date" type="date" remarks="Дата счёт-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="turnover_date" type="date" remarks="Дата совершения оборота по реализации">
                <constraints nullable="false"/>
            </column>

            <column name="accounting_date" type="date" remarks="Дата проводки">
                <constraints nullable="false"/>
            </column>

            <column name="erp_doc_num" type="varchar(30)" remarks="№ счёт-фактуры в системе ERP">
                <constraints nullable="true"/>
            </column>

            <column name="erp_doc_date" type="date" remarks="Дата регистрации счёт-фактуры в системе ERP">
                <constraints nullable="true"/>
            </column>

            <column name="esf_doc_num" type="varchar(30)" remarks="№ счёт-фактуры в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="esf_doc_date" type="date" remarks="Дата регистрации счёт-фактуры в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="esf_status" type="varchar2(10)" remarks="Статус СФ в системе ЭСФ">
                <constraints nullable="true"/>
            </column>

            <column name="description" type="varchar(300)" remarks="Описание счёт-фактуры (заголовок)">
                <constraints nullable="true"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Курс">
                <constraints nullable="true"/>
            </column>

            <column name="exchange_date" type="date" remarks="Дата курса">
                <constraints nullable="true"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счет-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="tax" type="number" remarks="Сумма налога">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-21" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_purchase_invoices</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_purchase_invoices"
                schemaName="apps"
                tableName="fin_purchase_invoices"/>
    </changeSet>

    <changeSet id="fin-eug-22" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_purchase_invoices</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_purchase_invoices_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-23" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_purchase_invoice_lines</comment>
        <createTable tableName="fin_purchase_invoice_lines" schemaName="apps" remarks="Строки полученных счетов-фактур">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_id" type="number" remarks="Идентификатор полученной СФ">
                <constraints nullable="false"/>
            </column>

            <column name="line_type_code" type="varchar(20)" remarks="Код типа строки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_num" type="number" remarks="Номер позиции">
                <constraints nullable="false"/>
            </column>

            <column name="item_num" type="varchar(100)" remarks="Номер услуги">
                <constraints nullable="true"/>
            </column>

            <column name="gjs_id" type="number" remarks="Идентификатор услуги">
                <constraints nullable="true"/>
            </column>

            <column name="description" type="varchar(100)" remarks="Описание">
                <constraints nullable="true"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="true"/>
            </column>

            <column name="unit_name" type="varchar(100)" remarks="Ед. измерения">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate_id" type="number" remarks="Идентификатор ставки НДС">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate" type="number" remarks="Ставка НДС">
                <constraints nullable="true"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="unit_price" type="number" remarks="Цена за единицу">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Стоимость ТРУ">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-24" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_purchase_invoice_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_purchase_invoice_lines"
                schemaName="apps"
                tableName="fin_purchase_invoice_lines"/>
    </changeSet>

    <changeSet id="fin-eug-25" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_purchase_invoice_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_purchase_invoice_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-26" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_receipt_applications</comment>
        <createTable tableName="fin_receipt_applications" schemaName="apps" remarks="Учёт поступлений">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="erp_doc_num" type="number" remarks="Номер документа в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="erp_doc_date" type="date" remarks="Дата документа в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="debt_type_code" type="varchar(20)" remarks="Тип задолженности">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_id" type="number" remarks="Идентификатор выставленной СФ">
                <constraints nullable="true"/>
            </column>

            <column name="bp_num" type="varchar(20)" remarks="Номер бизнес-партнера в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="contract_num" type="varchar(20)" remarks="Номер договора в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="external_contract_num" type="varchar(30)" remarks="Внешний номер договора">
                <constraints nullable="false"/>
            </column>

            <column name="payer_id" type="number" remarks="Идентификатор отправителя денег">
                <constraints nullable="true"/>
            </column>

            <column name="payee_id" type="number" remarks="Идентификатор получателя денег">
                <constraints nullable="true"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="true"/>
            </column>

            <column name="accounting_date" type="date" remarks="Дата учёта">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Учтённая сумма">
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Код валюты">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Курс валюты">
                <constraints nullable="false"/>
            </column>

            <column name="is_current_record" type="number" remarks="Флаг - текущая запись?">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-27" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_receipt_applications</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_receipt_applications"
                schemaName="apps"
                tableName="fin_receipt_applications"/>
    </changeSet>

    <changeSet id="fin-eug-28" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_receipt_applications</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_receipt_applications_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-29" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_check_applications</comment>
        <createTable tableName="fin_check_applications" schemaName="apps" remarks="Учёт платежей">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="erp_doc_num" type="number" remarks="Номер документа в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="erp_doc_date" type="date" remarks="Дата документа в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="debt_type_code" type="varchar(20)" remarks="Тип задолженности">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_id" type="number" remarks="Идентификатор полученной СФ">
                <constraints nullable="true"/>
            </column>

            <column name="bp_num" type="varchar(20)" remarks="Номер бизнес-партнера в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="contract_num" type="varchar(20)" remarks="Номер договора в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="external_contract_num" type="varchar(30)" remarks="Внешний номер договора">
                <constraints nullable="false"/>
            </column>

            <column name="payer_id" type="number" remarks="Идентификатор отправителя денег">
                <constraints nullable="true"/>
            </column>

            <column name="payee_id" type="number" remarks="Идентификатор получателя денег">
                <constraints nullable="true"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="true"/>
            </column>

            <column name="accounting_date" type="date" remarks="Дата учёта">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Учтённая сумма">
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Код валюты">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Курс валюты">
                <constraints nullable="false"/>
            </column>

            <column name="is_current_record" type="number" remarks="Флаг - текущая запись?">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-30" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_check_applications</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_check_applications"
                schemaName="apps"
                tableName="fin_check_applications"/>
    </changeSet>

    <changeSet id="fin-eug-31" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_check_applications</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_check_applications_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-32" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_total_delivery_headers</comment>
        <createTable tableName="fin_total_delivery_headers" schemaName="apps" remarks="Объем оказанных услуг за период - заголовок">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="period_id" type="number" remarks="Идентификатор периода">
                <constraints nullable="false"/>
            </column>

            <column name="is_final" type="number" remarks="Флаг - окончательный расчёт">
                <constraints nullable="true"/>
            </column>

            <column name="version_id" type="number" remarks="Флаг - версия">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-33" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_total_delivery_headers</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_total_delivery_headers"
                schemaName="apps"
                tableName="fin_total_delivery_headers"/>
    </changeSet>

    <changeSet id="fin-eug-34" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_total_delivery_headers</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_total_delivery_headers_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-35" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_total_delivery_lines</comment>
        <createTable tableName="fin_total_delivery_lines" schemaName="apps" remarks="Объем оказанных услуг за период - строки">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="header_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="is_invoice_created" type="number" remarks="Флаг - СФ создана">
                <constraints nullable="true"/>
            </column>

            <column name="is_estimated_created" type="number" remarks="Флаг - оценочное начисление создано">
                <constraints nullable="true"/>
            </column>

            <column name="vendor_id" type="number" remarks="Идентификатор бизнес-партнера поставщика">
                <constraints nullable="false"/>
            </column>

            <column name="customer_id" type="number" remarks="Идентификатор договора бизнес-партнера заказчика">
                <constraints nullable="false"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="false"/>
            </column>

            <column name="gjs_id" type="number" remarks="Идентификатор услуги">
                <constraints nullable="false"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-36" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_total_delivery_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_total_delivery_lines"
                schemaName="apps"
                tableName="fin_total_delivery_lines"/>
    </changeSet>

    <changeSet id="fin-eug-37" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_total_delivery_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_total_delivery_lines_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-38" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_debt_types</comment>
        <createTable tableName="fin_debt_types" schemaName="apps" remarks="Типы задолженностей">

            <column name="code" type="varchar(20)" remarks="Код типа задолженности">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(100)" remarks="Наименование типа задолженности">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-39" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_debt_types</comment>
        <addPrimaryKey
                columnNames="code"
                constraintName="pk_fin_debt_types"
                schemaName="apps"
                tableName="fin_debt_types"/>
    </changeSet>

    <changeSet id="fin-eug-40" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_payment_requests</comment>
        <createTable tableName="fin_payment_requests" schemaName="apps" remarks="Список счетов на оплату">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="period_id" type="number" remarks="Идентификатор периода">
                <constraints nullable="false"/>
            </column>

            <column name="vendor_id" type="number" remarks="Идентификатор поставщика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="customer_id" type="number" remarks="Идентификатор заказчика товаров, работ, услуг">
                <constraints nullable="false"/>
            </column>

            <column name="contract_id" type="number" remarks="Идентификатор договора">
                <constraints nullable="false"/>
            </column>

            <column name="num" type="varchar(20)" remarks="№ счёт на оплату">
                <constraints nullable="false"/>
            </column>

            <column name="payment_request_date" type="date" remarks="Дата счёт на оплату">
                <constraints nullable="false"/>
            </column>

            <column name="due_date" type="date" remarks="Оплатить до">
                <constraints nullable="true"/>
            </column>

            <column name="description" type="varchar(300)" remarks="Описание счёта на оплату (заголовок)">
                <constraints nullable="true"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счёта-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="is_ready" type="number" remarks="Готов">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-41" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_payment_requests</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_payment_requests"
                schemaName="apps"
                tableName="fin_payment_requests"/>
    </changeSet>

    <changeSet id="fin-eug-42" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_payment_requests</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_payment_requests_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-43" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_payment_request_lines</comment>
        <createTable tableName="fin_payment_request_lines" schemaName="apps" remarks="Строки счетов на оплату">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="payment_request_id" type="number" remarks="Идентификатор счёта на оплату">
                <constraints nullable="false"/>
            </column>

            <column name="gjs_id" type="number" remarks="Идентификатор услуги">
                <constraints nullable="false"/>
            </column>

            <column name="unit_id" type="number" remarks="Идентификатор единицы измерения">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="unit_price" type="number" remarks="Цена за единицу">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Стоимость ТРУ">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-44" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_payment_request_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_payment_request_lines"
                schemaName="apps"
                tableName="fin_payment_request_lines"/>
    </changeSet>

    <changeSet id="fin-eug-45" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_payment_request_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_payment_request_lines_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-46" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_1" schemaName="apps" tableName="fin_sale_invoices">
            <column name="vendor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-47" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_2" schemaName="apps" tableName="fin_sale_invoices">
            <column name="consignor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-48" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_3" schemaName="apps" tableName="fin_sale_invoices">
            <column name="customer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-49" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_4" schemaName="apps" tableName="fin_sale_invoices">
            <column name="consignee_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-50" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_5" schemaName="apps" tableName="fin_sale_invoices">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-51" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_6" schemaName="apps" tableName="fin_sale_invoices">
            <column name="vendor_bank_account_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-52" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_7" schemaName="apps" tableName="fin_sale_invoices">
            <column name="customer_bank_account_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-53" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_8" schemaName="apps" tableName="fin_sale_invoices">
            <column name="total_delivery_header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-54" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoices</comment>
        <createIndex indexName="idx_fin_sale_invoices_9" schemaName="apps" tableName="fin_sale_invoices">
            <column name="src_invoice_id"  type="number"/>
        </createIndex>
    </changeSet>


    <changeSet id="fin-eug-55" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="vendor_id"
                constraintName="fk_fin_sale_invoices_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-56" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="consignor_id"
                constraintName="fk_fin_sale_invoices_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-57" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="customer_id"
                constraintName="fk_fin_sale_invoices_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-58" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="consignee_id"
                constraintName="fk_fin_sale_invoices_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-59" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="contract_id"
                constraintName="fk_fin_sale_invoices_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-60" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_bank_accounts</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="vendor_bank_account_id"
                constraintName="fk_fin_sale_invoices_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bank_accounts"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-61" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to dict_bank_accounts</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="customer_bank_account_id"
                constraintName="fk_fin_sale_invoices_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bank_accounts"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-62" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to fin_total_delivery_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="total_delivery_header_id"
                constraintName="fk_fin_sale_invoices_8"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_total_delivery_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-63" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoices to fin_sale_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoices"
                baseColumnNames="src_invoice_id"
                constraintName="fk_fin_sale_invoices_9"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_sale_invoices"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-64" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_1" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="invoice_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-65" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_2" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="line_type_code"  type="varchar(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-66" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_3" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="gjs_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-67" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_4" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="unit_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-68" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_5" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="tax_rate_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-69" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_sale_invoice_lines_6" schemaName="apps" tableName="fin_sale_invoice_lines">
            <column name="total_delivery_line_id"  type="number"/>
        </createIndex>
    </changeSet>


    <changeSet id="fin-eug-70" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to fin_sale_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="invoice_id"
                constraintName="fk_fin_sale_invoice_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_sale_invoices"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-71" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to fin_invoice_line_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="line_type_code"
                constraintName="fk_fin_sale_invoice_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_invoice_line_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="fin-eug-72" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to dict_gjs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="gjs_id"
                constraintName="fk_fin_sale_invoice_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_gjs"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-73" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="unit_id"
                constraintName="fk_fin_sale_invoice_lines_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-74" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to fin_tax_rates</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="tax_rate_id"
                constraintName="fk_fin_sale_invoice_lines_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_tax_rates"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-75" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_sale_invoice_lines to fin_total_delivery_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_sale_invoice_lines"
                baseColumnNames="total_delivery_line_id"
                constraintName="fk_fin_sale_invoice_lines_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_total_delivery_lines"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-76" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_1" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="vendor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-77" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_2" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="consignor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-78" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_3" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="customer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-79" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_4" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="consignee_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-80" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_5" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-81" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_6" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="vendor_bank_account_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-82" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_7" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="customer_bank_account_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-83" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoices</comment>
        <createIndex indexName="idx_fin_purchase_invoices_8" schemaName="apps" tableName="fin_purchase_invoices">
            <column name="src_invoice_id"  type="number"/>
        </createIndex>
    </changeSet>


    <changeSet id="fin-eug-84" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="vendor_id"
                constraintName="fk_fin_purchase_invoices_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-85" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="consignor_id"
                constraintName="fk_fin_purchase_invoices_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-86" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="customer_id"
                constraintName="fk_fin_purchase_invoices_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-87" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="consignee_id"
                constraintName="fk_fin_purchase_invoices_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-88" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="contract_id"
                constraintName="fk_fin_purchase_invoices_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-89" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_bank_accounts</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="vendor_bank_account_id"
                constraintName="fk_fin_purchase_invoices_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bank_accounts"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-90" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to dict_bank_accounts</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="customer_bank_account_id"
                constraintName="fk_fin_purchase_invoices_7"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bank_accounts"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-91" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoices to fin_purchase_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoices"
                baseColumnNames="src_invoice_id"
                constraintName="fk_fin_purchase_invoices_8"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_purchase_invoices"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-92" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_purchase_invoice_lines</comment>
        <createIndex indexName="idx_fin_purchase_invoice_lines_1" schemaName="apps" tableName="fin_purchase_invoice_lines">
            <column name="invoice_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-93" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_purchase_invoice_lines_2" schemaName="apps" tableName="fin_purchase_invoice_lines">
            <column name="line_type_code"  type="varchar(20)"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-94" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_purchase_invoice_lines_3" schemaName="apps" tableName="fin_purchase_invoice_lines">
            <column name="gjs_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-95" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_purchase_invoice_lines_4" schemaName="apps" tableName="fin_purchase_invoice_lines">
            <column name="unit_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-96" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_sale_invoice_lines</comment>
        <createIndex indexName="idx_fin_purchase_invoice_lines_5" schemaName="apps" tableName="fin_purchase_invoice_lines">
            <column name="tax_rate_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-97" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoice_lines to fin_purchase_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoice_lines"
                baseColumnNames="invoice_id"
                constraintName="fk_fin_purchase_invoice_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_purchase_invoices"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-98" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoice_lines to fin_invoice_line_types</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoice_lines"
                baseColumnNames="line_type_code"
                constraintName="fk_fin_purchase_invoice_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_invoice_line_types"
                referencedColumnNames="code"
        />
    </changeSet>

    <changeSet id="fin-eug-99" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoice_lines to dict_gjs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoice_lines"
                baseColumnNames="gjs_id"
                constraintName="fk_fin_purchase_invoice_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_gjs"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-100" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoice_lines to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoice_lines"
                baseColumnNames="unit_id"
                constraintName="fk_fin_purchase_invoice_lines_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-101" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_purchase_invoice_lines to fin_tax_rates</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_purchase_invoice_lines"
                baseColumnNames="tax_rate_id"
                constraintName="fk_fin_purchase_invoice_lines_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_tax_rates"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-102" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_check_applications</comment>
        <createIndex indexName="idx_fin_check_applications_1" schemaName="apps" tableName="fin_check_applications">
            <column name="payer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-103" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_check_applications</comment>
        <createIndex indexName="idx_fin_check_applications_2" schemaName="apps" tableName="fin_check_applications">
            <column name="payee_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-104" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_check_applications</comment>
        <createIndex indexName="idx_fin_check_applications_3" schemaName="apps" tableName="fin_check_applications">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-105" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_check_applications</comment>
        <createIndex indexName="idx_fin_check_applications_4" schemaName="apps" tableName="fin_check_applications">
            <column name="invoice_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-106" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_check_applications to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_check_applications"
                baseColumnNames="payer_id"
                constraintName="fk_fin_check_applications_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-107" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_check_applications to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_check_applications"
                baseColumnNames="payee_id"
                constraintName="fk_fin_check_applications_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-108" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_check_applications to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_check_applications"
                baseColumnNames="contract_id"
                constraintName="fk_fin_check_applications_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-109" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_check_applications to fin_purchase_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_check_applications"
                baseColumnNames="invoice_id"
                constraintName="fk_fin_check_applications_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_purchase_invoices"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-110" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_receipt_applications</comment>
        <createIndex indexName="idx_fin_receipt_applications_1" schemaName="apps" tableName="fin_receipt_applications">
            <column name="payer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-111" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_receipt_applications</comment>
        <createIndex indexName="idx_fin_receipt_applications_2" schemaName="apps" tableName="fin_receipt_applications">
            <column name="payee_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-112" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_receipt_applications</comment>
        <createIndex indexName="idx_fin_receipt_applications_3" schemaName="apps" tableName="fin_receipt_applications">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-113" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_receipt_applications</comment>
        <createIndex indexName="idx_fin_receipt_applications_4" schemaName="apps" tableName="fin_receipt_applications">
            <column name="invoice_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-114" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_receipt_applications to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_receipt_applications"
                baseColumnNames="payer_id"
                constraintName="fk_fin_receipt_applications_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-115" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_receipt_applications to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_receipt_applications"
                baseColumnNames="payee_id"
                constraintName="fk_fin_receipt_applications_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-116" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_receipt_applications to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_receipt_applications"
                baseColumnNames="contract_id"
                constraintName="fk_fin_receipt_applications_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-117" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_receipt_applications to fin_sale_invoices</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_receipt_applications"
                baseColumnNames="invoice_id"
                constraintName="fk_fin_receipt_applications_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_sale_invoices"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-118" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_requests</comment>
        <createIndex indexName="idx_fin_payment_requests_1" schemaName="apps" tableName="fin_payment_requests">
            <column name="vendor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-119" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_requests</comment>
        <createIndex indexName="idx_fin_payment_requests_2" schemaName="apps" tableName="fin_payment_requests">
            <column name="customer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-120" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_requests</comment>
        <createIndex indexName="idx_fin_payment_requests_3" schemaName="apps" tableName="fin_payment_requests">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-121" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_requests to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_requests"
                baseColumnNames="vendor_id"
                constraintName="fk_fin_payment_requests_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-123" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_requests to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_requests"
                baseColumnNames="customer_id"
                constraintName="fk_fin_payment_requests_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-124" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_requests to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_requests"
                baseColumnNames="contract_id"
                constraintName="fk_fin_payment_requests_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-125" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_request_lines</comment>
        <createIndex indexName="idx_fin_payment_request_lines_1" schemaName="apps" tableName="fin_payment_request_lines">
            <column name="payment_request_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-126" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_request_lines</comment>
        <createIndex indexName="idx_fin_payment_request_lines_2" schemaName="apps" tableName="fin_payment_request_lines">
            <column name="gjs_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-127" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_payment_request_lines</comment>
        <createIndex indexName="idx_fin_payment_request_lines_3" schemaName="apps" tableName="fin_payment_request_lines">
            <column name="unit_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-128" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_request_lines to fin_payment_requests</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_request_lines"
                baseColumnNames="payment_request_id"
                constraintName="fk_fin_payment_request_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_payment_requests"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-129" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_request_lines to dict_gjs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_request_lines"
                baseColumnNames="gjs_id"
                constraintName="fk_fin_payment_request_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_gjs"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-130" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_payment_request_lines to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_payment_request_lines"
                baseColumnNames="unit_id"
                constraintName="fk_fin_payment_request_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-131" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_headers</comment>
        <createIndex indexName="idx_fin_total_delivery_headers_1" schemaName="apps" tableName="fin_total_delivery_headers">
            <column name="period_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-132" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_headers to fin_periods</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_headers"
                baseColumnNames="period_id"
                constraintName="fk_fin_total_delivery_headers_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_periods"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-133" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_1" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="header_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-134" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_2" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="vendor_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-135" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_3" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="customer_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-136" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_4" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="contract_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-137" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_5" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="gjs_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-138" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_total_delivery_lines</comment>
        <createIndex indexName="idx_fin_total_delivery_lines_6" schemaName="apps" tableName="fin_total_delivery_lines">
            <column name="unit_id"  type="number"/>
        </createIndex>
    </changeSet>




    <changeSet id="fin-eug-139" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to fin_total_delivery_headers</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="header_id"
                constraintName="fk_fin_total_delivery_lines_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_total_delivery_headers"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-140" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="vendor_id"
                constraintName="fk_fin_total_delivery_lines_2"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-141" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to dict_business_partners</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="customer_id"
                constraintName="fk_fin_total_delivery_lines_3"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_business_partners"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-142" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to cm_doc_keg_cte</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="contract_id"
                constraintName="fk_fin_total_delivery_lines_4"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="cm_doc_keg_cte"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-143" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to dict_gjs</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="gjs_id"
                constraintName="fk_fin_total_delivery_lines_5"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_gjs"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-144" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_total_delivery_lines to dict_units</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_total_delivery_lines"
                baseColumnNames="unit_id"
                constraintName="fk_fin_total_delivery_lines_6"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_units"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-145" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_req_lines</comment>
        <createTable tableName="fin_req_lines" schemaName="apps" remarks="Строки заявок на закупку">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="req_num" type="number" remarks="Номер заявки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_num" type="number" remarks="Позиция заявки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_name" type="varchar(300)" remarks="Наименование позиции">
                <constraints nullable="false"/>
            </column>

            <column name="unit" type="varchar(100)" remarks="Единица измерения">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Стоимость ТРУ">
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="company_code" type="varchar(4)" remarks="Балансовая единица">
                <constraints nullable="false"/>
            </column>

            <column name="expected_date" type="date" remarks="Дата потребности">
                <constraints nullable="false"/>
            </column>

            <column name="is_deleted" type="number" remarks="Флаг - удалено">
                <constraints nullable="true"/>
            </column>

            <column name="is_unlocked" type="number" remarks="Флаг - деблокировано/утверждено">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-146" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_req_lines</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_req_lines"
                schemaName="apps"
                tableName="fin_req_lines"/>
    </changeSet>

    <changeSet id="fin-eug-147" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_req_lines</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_req_lines_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-148" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_req_items</comment>
        <createTable tableName="fin_req_items" schemaName="apps" remarks="Позиции из каталога услуг">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="line_id" type="number" remarks="Идентификатор строки заявки">
                <constraints nullable="false"/>
            </column>

            <column name="row_num" type="number" remarks="Номер строки">
                <constraints nullable="false"/>
            </column>

            <column name="item_num" type="varchar(100)" remarks="Номер услуги">
                <constraints nullable="false"/>
            </column>

            <column name="item_name" type="varchar(300)" remarks="Натменование услуги">
                <constraints nullable="false"/>
            </column>

            <column name="unit" type="varchar(100)" remarks="Единица измерения">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="unit_price" type="number" remarks="Цена">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-149" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_req_items</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_req_items"
                schemaName="apps"
                tableName="fin_req_items"/>
    </changeSet>

    <changeSet id="fin-eug-150" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_req_items</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_req_items_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-151" logicalFilePath="path-independent" author="eugene">
        <comment>creating index for table: fin_req_items</comment>
        <createIndex indexName="idx_fin_req_items_1" schemaName="apps" tableName="fin_req_items">
            <column name="line_id"  type="number"/>
        </createIndex>
    </changeSet>


    <changeSet id="fin-eug-152" logicalFilePath="path-independent" author="eugene">
        <comment>Creating foreign constraint: fin_req_items to fin_req_lines</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_req_items"
                baseColumnNames="line_id"
                constraintName="fk_fin_req_items_1"
                deferrable="true"
                initiallyDeferred="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_req_lines"
                referencedColumnNames="id"
        />
    </changeSet>
</databaseChangeLog>
